/*!
 * pixi-graphics-format - v1.0.0
 * https://github.com/bigtimebuddy/pixi-graphics-format
 * Compiled Thu, 10 Aug 2017 21:35:00 UTC
 *
 * pixi-graphics-format is licensed under the MIT license.
 * http://www.opensource.org/licenses/mit-license
 */
!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?i(exports):"function"==typeof define&&define.amd?define(["exports"],i):i(e.__pixiGraphics={})}(this,function(e){"use strict";if("undefined"==typeof PIXI)throw"PixiJS required";var i=function(){function e(){}return Object.defineProperty(e,"EXTENSION",{get:function(){return"pgf"},enumerable:!0,configurable:!0}),e.parse=function(i,r){if(void 0===r&&(r=new PIXI.Graphics),i=i.replace(/\n/g," "),!this.FORMAT.test(i))throw new SyntaxError("Supplied content is invalid GraphicsFormat");for(var t=i.split(" "),o=0;o<t.length;o++){var n=t[o];"#"===n[0]?t[o]=e.hexToUint(n):this.VALID_KEYS.test(n)||(t[o]=parseFloat(n))}for(var a,s=[],c=0;c<=t.length;){var l=t[c++],d=void 0;"string"==typeof l&&(d=this.COMMANDS[l]||l),void 0===l||r[d]?(a&&(r[a].apply(r,s),s.length=0),a=d):s.push(l)}return r},e.stringify=function(i){for(var r=i.graphicsData,t="",o=0,n=1,a=0,s=0,c=1,l=0;l<r.length;l++){var d=r[l];d.fillColor===o&&d.fillAlpha===n||(o=d.fillColor,n=d.fillAlpha,t+="f #"+e.uintToHex(o)+" ",1!==n&&(t+=e.toPrecision(n)+" ")),d.lineWidth>0&&(d.lineWidth!==a||d.lineColor!==s||d.lineAlpha!==c)&&(a=d.lineWidth,s=d.lineColor,c=d.lineAlpha,t+="s "+e.toPrecision(a)+" ",(s>0||1!==c)&&(t+="#"+e.uintToHex(s)+" "),1!==c&&(t+=e.toPrecision(c)+" "));var f=d.shape,h=d.holes;if(f instanceof PIXI.Rectangle)t+="dr "+(p=e.toPrecision(f.x))+" "+(u=e.toPrecision(f.y))+" "+(P=e.toPrecision(f.width))+" "+(I=e.toPrecision(f.height))+" c ";else if(f instanceof PIXI.Ellipse){var p=e.toPrecision(f.x),u=e.toPrecision(f.y),P=e.toPrecision(f.width),I=e.toPrecision(f.height);t+="de "+p+" "+u+" "+P+" "+I+" c "}else if(f instanceof PIXI.Circle)t+="dc "+(p=e.toPrecision(f.x))+" "+(u=e.toPrecision(f.y))+" "+e.toPrecision(f.radius)+" c ";else if(f instanceof PIXI.Polygon){for(var g=f.points,v=g.length,T=g[0]===g[v-2]&&g[1]===g[v-1],m=T&&0===h.length?v/2-1:v/2,x=0;x<m;x++){var p=e.toPrecision(f.points[2*x]),u=e.toPrecision(f.points[2*x+1]);t+=(0===x?"m":"l")+" "+p+" "+u+" "}for(var y=0;y<h.length;y++){for(var X=h[y],w=X.points.length/2,E=0;E<w;E++){var p=e.toPrecision(X.points[2*E]),u=e.toPrecision(X.points[2*E+1]);t+=(0===E?"m":"l")+" "+p+" "+u+" "}t+="h "}T&&(t+="c ")}}return t.trim()},e.uintToHex=function(e){for(var i=e.toString(16);i.length<6;)i="0"+i;return i.replace(/([a-f0-9])\1([a-f0-9])\2([a-f0-9])\3/,"$1$2$3")},e.middleware=function(){return function(i,r){"pgf"===i.extension&&(i.graphics=e.parse(i.data)),r()}},e.hexToUint=function(e){return 3===(e=e.substr(1)).length&&(e=e.replace(/([a-f0-9])/g,"$1$1")),parseInt(e,16)},e.toPrecision=function(e,i){void 0===i&&(i=2);var r=Math.pow(10,i);return Math.round(e*r)/r},e.COMMANDS={c:"closePath",h:"addHole",m:"moveTo",l:"lineTo",q:"quadraticCurveTo",b:"bezierCurveTo",f:"beginFill",s:"lineStyle",dr:"drawRect",rr:"drawRoundedRect",rc:"drawRoundedRect",dc:"drawCircle",ar:"arc",at:"arcTo",de:"drawEllipse"},e.FORMAT=/^((\s)?(c|h|m|l|q|b|f|s|dr|rr|rc|dc|ar|at|de)(\s[0-9\.#\-a-f]+)*(\s)?)*$/,e.VALID_KEYS=/^(c|h|m|l|q|b|f|s|dr|rr|rc|dc|ar|at|de)$/,e}();PIXI.loader.use(i.middleware()),PIXI.loaders.Loader.addPixiMiddleware(i.middleware),PIXI.loaders.Resource.setExtensionXhrType(i.EXTENSION,PIXI.loaders.Resource.XHR_RESPONSE_TYPE.TEXT),PIXI.GraphicsFormat||Object.defineProperty(PIXI,"GraphicsFormat",{get:function(){return i}}),e.GraphicsFormat=i,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=pixi-graphics-format.js.map
